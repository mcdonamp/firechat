<html>
<head>
  <meta charset="utf-8">
  <title>KittyChat - Firebase powered chat for Hack Duke</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Firebase Firechat YC Hacks">
  <meta name="author" content="Mike McDonald, Engineer @ Firebase, mcdonald@firebase.com">
  <meta name="description" content="Open source, real-time chat built on Firebase.">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap-responsive.min.css"> 
  <link rel="stylesheet" href="build/styles.css">
  <link rel="shortcut icon" href="assets/img/favicon.ico">
</head>

<body class="home-page" data-twttr-rendered="true">
  <header id="top-content">
    <div class="header-title">
      <!-- <div id="top-shadow"></div> -->
      <div class="container text-center">
        <div id="home-title"><span class="strong">Kitty</span><span class="">Chat</span></div>
        <div id="home-subtitle">Real-time chat for Hack Duke, built on Firebase</div>
      </div>
    </div>

    <div class="header-content">
      <div class="container text-center">
        <div class="row">
          <div class="span12">
            <a href="http://www.hackduke.com/" target="_blank">
              <img style="height:auto; width:auto; max-width:300px; max-height:300px;" src="./assets/img/hackduke-logo.svg">
            </a>
          </div>
        </div>
        <div class="row">
          <div class="span12">
            <div id="firechat-container" class="clearfix"><div id="firechat" class="full">
              <div id="firechat-header" class="clearfix">
                <div class="clearfix"><div class="half dropdown" style="">
                  <a id="firechat-btn-rooms" class="dropdown-toggle btn full" data-toggle="dropdown" href="#">
                    <span class="icon user-chat"></span>
                    Chat Rooms
                    <span class="caret"></span>
                  </a>
                  <div class="dropdown-menu full" role="menu"><ul id="firechat-room-list"></ul><div class="dropdown-footer aligncenter">
                    <button type="button" class="btn twothird center" id="firechat-btn-create-room-prompt">Create Room</button>
                  </div></div></div>
                  <div class="half dropdown" style="">
                    <a data-event="firechat-user-search-btn" class="btn full dropdown-toggle" data-toggle="dropdown" href="#">
                      <span class="icon user-group"></span>
                      Visitors
                      <span class="caret"></span>
                    </a>
                    <div class="dropdown-menu" role="menu">
                      <div class="dropdown-header aligncenter clearfix">
                        <div class="search-wrapper">
                          <span class="icon search"></span>
                          <input type="text" data-event="firechat-user-search" data-template="templates/user-search-list-item.html" data-target="firechat-user-search" data-controls="firechat-user-search-controls" class="center fivesixth">
                        </div>
                      </div>
                      <ul id="firechat-user-search"></ul><div class="dropdown-footer aligncenter clearfix">
                      <div id="firechat-user-search-controls" class="clearfix">
                        <span class="quarter"></span>
                        <button type="button" class="btn half" data-event="firechat-user-search" data-toggle="firechat-pagination-next" data-template="templates/user-search-list-item.html" data-target="firechat-user-search" data-controls="firechat-user-search-controls" disabled="disabled">Next</button>
                      </div><label class="center full">
                      <small>Use "+ Invite" button within chat rooms for regular invites.</small>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div id="firechat-tabs" class="clearfix">
            <ul id="firechat-tab-list" class="nav nav-tabs clearfix"><li data-room-id="-JSuwxJt4wRN6UMqF39E" class="active" style="width: 325px;">
              <a href="#-JSuwxJt4wRN6UMqF39E" data-toggle="tab" title="Firechat Demo">Firechat Demo</a>
            </li></ul>
            <div id="firechat-tab-content" class="tab-content">
              <div id="-JSuwxJt4wRN6UMqF39E" data-room-id="-JSuwxJt4wRN6UMqF39E" class="tab-pane active">
                <div class="tab-pane-menu clearfix">
                  <div class="dropdown twofifth">
                    <a data-event="firechat-user-room-list-btn" class="full btn dropdown-toggle" data-toggle="dropdown" href="#" data-target="firechat-room-user-list--JSuwxJt4wRN6UMqF39E">
                      <span class="icon user-group"></span>
                      In Room
                      <span class="caret"></span>
                    </a>
                    <div class="dropdown-menu" role="menu">
                      <ul id="firechat-room-user-list--JSuwxJt4wRN6UMqF39E" class="full"></ul>
                    </div>
                  </div><div class="dropdown twofifth">
                  <a data-event="firechat-user-search-btn" class="full btn dropdown-toggle" data-toggle="dropdown" href="#">
                    <span class="icon plus">+</span>
                    Invite
                    <span class="caret"></span>
                  </a><div class="dropdown-menu" role="menu">
                  <div class="dropdown-header aligncenter clearfix">
                    <div class="search-wrapper">
                      <span class="icon search"></span>
                      <input type="text" data-event="firechat-user-search" data-template="templates/room-user-search-list-item.html" data-target="firechat-room-user-search--JSuwxJt4wRN6UMqF39E" data-controls="firechat-room-user-search-controls--JSuwxJt4wRN6UMqF39E" class="center fivesixth">
                    </div>
                  </div>
                  <ul id="firechat-room-user-search--JafHyL8obSYUkUGZdnF"></ul><div class="dropdown-footer aligncenter clearfix">
                  <div id="firechat-room-user-search-controls--JafHyL8obSYUkUGZdnF" class="clearfix"><span class="quarter"></span>
<!--
<button type='button' class='btn third disabled' data-event='firechat-user-search' data-template='templates/room-user-search-list-item.html' data-target='firechat-room-user-search--JSuwxJt4wRN6UMqF39E' data-controls='firechat-room-user-search-controls--JSuwxJt4wRN6UMqF39E' data-toggle='firechat-pagination-prev' disabled=disabled>Prev</button>
-->
<button type="button" class="btn half disabled" data-event="firechat-user-search" data-template="templates/room-user-search-list-item.html" data-target="firechat-room-user-search--JafHyL8obSYUkUGZdnF" data-controls="firechat-room-user-search-controls--JafHyL8obSYUkUGZdnF" data-toggle="firechat-pagination-next" disabled="disabled">Next</button>
</div>
</div>
</div>
</div><a href="#!" data-event="firechat-close-tab" class="icon close right" style="15px 5px" title="Leave Room"></a></div>
<div class="clearfix">
  <div id="firechat-messages-JSuwxJt4wRN6UMqF39E" class="chat">
  </div>
</div>
<div class="clearfix new-message" id="message">
  <label>Your message:</label>
  <textarea id="textarea-JSuwxJt4wRN6UMqF39E" placeholder="Type your message here..."></textarea>
</div>
</div></div>
</div><div id="firechat-footer" class="clearfix"></div>
</div></div>
<div id="user-info" style="display: none;">
  Logged in as <span id="user-name"></span>.
  <a href="javascript:logout();">Logout</a>
</div>
<div id="user-info-login" style="display: none;">
  <a href="javascript:$('#auth-modal').modal({ show: true });">Log in</a> to chat!
</div>
</div>
</div>
</div>
</div>
<div class="header-footer">
<div class="container text-center">
  <p>
  </p><div id="footer-links">
  <a href="http://hackdukefall2014.challengepost.com/">ChallengePost</a>
  <a href="https://github.com/mcdonamp/firechat/tree/mm-hackduke" target="_blank">GitHub Project</a>
  <a href="mailto:mcdonald@firebase.com?subject=[Hack Duke Chat Question]" target="_blank">Contact Us!</a>
  </div>
<p></p>
</div>
</div>
</header>

<div id="auth-modal" class="modal hide fade" tabindex="-1" role="dialog">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">Ã—</button>
    <h4 id="myModalLabel">Authenticate to continue</h4>
  </div>
  <div class="modal-body text-center">
    <p>
      <a id="twitter-signin" style="text-decoration:none" href="javascript:login('twitter');">
        <button class="btn btn-block btn-large btn-warning" id="twitter-signin-btn">Sign in with Twitter</button>
        <!-- <img id="twitter-signin-btn" src="images/sign-in-with-twitter.png"> -->
      </a>
    </p>
    <p>
      <a id="facebook-signin" style="text-decoration:none" href="javascript:login('facebook');">
        <button class="btn btn-block btn-large btn-warning" id="facebook-signin-btn">Sign in with Facebook</button>
        <!-- <img id="facebook-signin-btn" src="images/sign-in-with-facebook.png"> -->
      </a>
    </p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal">Cancel</button>
  </div>
</div>

<!-- Firechat -->
<!-- <script id="facebook-jssdk" src="//connect.facebook.net/en_US/all.js#xfbml=1"></script> -->
<script src="https://cdn.firebase.com/v0/firebase.js"></script>
<script src="https://cdn.firebase.com/v0/firebase-simple-login.js"></script>
<script src="https://cdn.firebase.com/v0/firebase-token-generator.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap-modal.min.js"></script>

<!-- Download from https://github.com/firebase/Firechat -->
<link rel="stylesheet" href="build/firechat-default.min.css">
<script src="build/firechat-default.min.js"></script>
<script>
var chatRef = new Firebase('https://hack-duke.firebaseio.com/'),
target = document.getElementById("firechat-container"),
authModal = $('#auth-modal').modal({ show: false }),
chat = new FirechatUI(chatRef, target);

chat.on('auth-required', function() {
  authModal.modal('show');
  return false;
});

var auth = new FirebaseSimpleLogin(chatRef, function(error, user) {
  if (user) {
    var userId = user.id,
    username = user.displayName;

    chat.setUser(user.id, username);
    $('#user-name').text(username);
    $('#user-info').show();
    $('#user-info-login').hide();
    setTimeout(function() {
      // Default login is to the "Lounge"
      chat._chat.enterRoom('-JafHyL8obSYUkUGZdnF')
    }, 500);
  } else {
    $('#user-info').hide();
    $('#user-info-login').show();
    chat._chat.enterRoom('-JafHyL8obSYUkUGZdnF')
  }
});

function login(provider) {
  authModal.modal('hide');
  auth.login(provider);
}

function logout() {
  auth.logout();
  location.reload();
}
</script>

</body></html>